<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Monish Reddy Kotturu">
    <title>ARL STRONG UMass Lowell | Robot Simulation</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css"/>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
</head>

<body>
    <div class="loader"></div>
        <div class="body-container">
        <button id="instructions-button" onclick="toggleModal()">Instructions</button>
        <div id="instructions-modal">
            <span class="close" onclick="closeModal()">&times;</span>
            <div class="side-panel">
                <div id="instructions">
                <p>The blue colored cell represents the robot that can be controlled by the user. The red colored cell represents the robot that moves autonomously. The yellow shaded region is the area explored by both the human and the agents. Use the arrow keys or AWSD to move the user controlled robot. Press C (and hold if needed) to focus on the agent. The shaded regions around the robots represent the explored area.</p>
                </div>
                <br />
                <div id="settings">
                <p>Select a map:</p>
                <select name="maps" id="maps"></select>

                <p style="color: red">&darr; DISABLED &darr;</p>

                <p>Enter the values for the number of rows and columns:</p>
                Rows: <input type="text" id="rows" value="30" /><br /><br />
                Columns: <input type="text" id="columns" value="30" /><br /><br />
                <button onclick="modifyMap()" disabled>Create New Map</button><br /><br /><br />
                <p>Enter a value to set the speed of the autonomous robot (lower = faster):</p>
                Speed: <input type="text" id="speed" value="4" /><br /><br />
                <button onclick="setSpeed()" disabled>Set Speed</button>
                </div>
            </div>
        </div>
        <div id="popup-modal">
            <div id="popup-modal-container">
                <div class="map-info">
                    <div id="images-container">
                        <div class="explored">
                            <img src="#" id="minimap" alt="Entire Map">
                        </div>
                        <div class="explored">
                            <img src="#" id="bot-image" alt="Agent explored area">
                        </div>
                        <div class="explored">
                            <img src="#" id="human-image" alt="Human explored area">
                        </div>
                    </div>
                    <div class="headings-container">
                        <p>Entire map</p>
                        <p>Agent explored area (highlighted in green)</p>
                        <p>Human explored area (highlighted in blue)</p>
                    </div>
                </div>
                <div class="tableItems"></div>
                <div id="userInputButtons">
                    <button onclick="confirmExploredArea()">Integrate</button>
                    <button onclick="undoExploration()">Discard</button>
                </div>
                <div class="scroll-indicator"></div>
            </div>
        </div>
        <div id="simulation">
            <div id="info">
                <div id="legend">
                    <div style="width: 40px; height: 20px; background-color: #9999ff; border-radius: 7px;"></div>
                    <p>Human explored region</p>
                    <div style="width: 40px; height: 20px; background-color: #99ffb7; border-radius: 7px;"></div>
                    <p>Agent explored region in the current interval</p>
                    <div style="width: 40px; height: 20px; background-color: #ff9eae; border-radius: 7px;"></div>
                    <p>Trusted agent explored region</p>
                    <div style="width: 40px; height: 20px; background-color: #ffff7f; border-radius: 7px;"></div>
                    <p>Region explored by both human and agent</p>
                </div>
                <div id="timer">0</div>
                <button id="terminate" onclick="terminate()">Terminate Simulation</button>
            </div>
            <div id="map-container">
                <canvas width="4000" height="4000" id="map"></canvas>
            </div>
        </div>
    </div>

    <!-- Load the CDN first -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/js/jcanvas.min.js"></script>
    <script type="text/javascript" src="/js/simulation.js"></script>
</body>
</html>
